<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI Tim Mạch – Bs Hưng</title>

  <!-- CSS -->
  <link rel="stylesheet" href="static/css/style.css">

  <!-- Bootstrap Icons (optional, để giao diện đẹp hơn) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>
  <div class="container">

    <h1 class="title mt-3 mb-4">AI Tim Mạch – Bs Hưng</h1>

    <!-- STEP 1 -->
    <div id="step1" class="step card-block">
      <h2>Bước 1 – Thông tin cơ bản</h2>

      <label>Tuổi</label>
      <input id="age" class="form-control mb-3" type="number" placeholder="Nhập tuổi">

      <label>Giới tính</label>
      <select id="sex" class="form-control mb-4">
        <option value="Nam">Nam</option>
        <option value="Nữ">Nữ</option>
      </select>

      <button class="btn-primary w-100" onclick="nextStep(2)">Tiếp tục</button>
    </div>

    <!-- STEP 2 -->
    <div id="step2" class="step card-block hidden">
      <h2>Bước 2 – Tải ảnh ECG</h2>

      <input id="ecg" type="file" accept="image/*" class="form-control mb-3">

      <button class="btn-secondary w-100 mb-2" onclick="nextStep(1)">Quay lại</button>
      <button class="btn-primary w-100" onclick="uploadECG()">Phân tích ECG</button>

      <div id="loading_ecg" class="loading mt-2"></div>
    </div>

    <!-- STEP 3 -->
    <div id="step3" class="step card-block hidden">
      <h2>Bước 3 – Triệu chứng + HEAR Score</h2>

      <label>Triệu chứng</label>
      <textarea id="symptoms" class="form-control mb-3" rows="4" placeholder="Mô tả triệu chứng: đau ngực, thời gian, yếu tố khởi phát..."></textarea>

      <h3 class="mt-4">Tính điểm HEAR</h3>

      <label>Lịch sử (History)</label>
      <select id="history" class="form-control mb-2">
        <option value="0">0 – Không điển hình</option>
        <option value="1">1 – Không rõ</option>
        <option value="2">2 – Điển hình</option>
      </select>

      <label>ECG</label>
      <select id="hear_ecg" class="form-control mb-2">
        <option value="0">0 – Bình thường</option>
        <option value="1">1 – Không đặc hiệu</option>
        <option value="2">2 – ST thay đổi</option>
      </select>

      <label>Tuổi</label>
      <select id="hear_age" class="form-control mb-2">
        <option value="0">0 – &lt;45</option>
        <option value="1">1 – 45–65</option>
        <option value="2">2 – &gt;65</option>
      </select>

      <label>Yếu tố nguy cơ</label>
      <select id="hear_risk" class="form-control mb-4">
        <option value="0">0 – Không</option>
        <option value="1">1 – 1 yếu tố</option>
        <option value="2">2 – ≥2 yếu tố</option>
      </select>

      <button class="btn-secondary w-100 mb-2" onclick="nextStep(2)">Quay lại</button>
      <button class="btn-primary w-100" onclick="analyzeClinical()">Tổng hợp AI</button>

      <div id="loading_clinical" class="loading mt-2"></div>
    </div>

    <!-- STEP 4 -->
    <div id="step4" class="step card-block hidden">
      <h2>Kết quả phân tích AI</h2>

      <pre id="result_box" class="result-box"></pre>

      <button class="btn-secondary w-100 mt-3" onclick="nextStep(1)">Làm lại từ đầu</button>
    </div>

  </div>

  <!-- JS logic -->
  <script src="static/js/app.js"></script>
</body>
</html>
